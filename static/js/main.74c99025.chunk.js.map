{"version":3,"sources":["NowPlaying.js","Weather.js","CalendarEmbed.js","App.js","index.js"],"names":["CLIENT_ID","REDIRECT_URI","SCOPES","AUTH_ENDPOINT","TOKEN_ENDPOINT","NowPlaying","token","setToken","useState","refreshToken","setRefreshToken","track","setTrack","useEffect","code","URLSearchParams","window","location","search","get","savedAccess","localStorage","getItem","savedRefresh","verifier","fetch","method","headers","Content-Type","body","grant_type","redirect_uri","client_id","code_verifier","then","res","json","data","setItem","access_token","refresh_token","history","replaceState","document","title","pathname","catch","console","error","handleLogin","async","array","Uint8Array","crypto","getRandomValues","btoa","String","fromCharCode","replace","generateCodeVerifier","challenge","TextEncoder","encode","digest","subtle","generateCodeChallenge","authUrl","encodeURIComponent","refreshAccessToken","useCallback","fetchNow","Authorization","status","ok","is_playing","item","name","artists","map","a","join","albumArt","album","images","url","external_urls","spotify","id","setInterval","clearInterval","React","createElement","className","src","alt","href","target","rel","role","aria-label","onClick","API_KEY","CITY","Weather","weather","setWeather","temp","main","condition","icon","CalendarEmbed","style","border","width","height","frameBorder","scrolling","App","ReactDOM","createRoot","getElementById","render"],"mappings":"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","file":"static/js/main.74c99025.chunk.js","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\n\r\nconst CLIENT_ID = 'fa95a427198e4d4790c0be1b9a5d994c';\r\nconst REDIRECT_URI = 'https://j4mest.github.io/';\r\nconst SCOPES = 'user-read-currently-playing user-read-playback-state';\r\nconst AUTH_ENDPOINT = 'https://accounts.spotify.com/authorize';\r\nconst TOKEN_ENDPOINT = 'https://accounts.spotify.com/api/token';\r\n\r\nfunction generateCodeVerifier() {\r\n  const array = new Uint8Array(64);\r\n  window.crypto.getRandomValues(array);\r\n  return btoa(String.fromCharCode(...array))\r\n    .replace(/\\+/g, '-')\r\n    .replace(/\\//g, '_')\r\n    .replace(/=+$/, '');\r\n}\r\n\r\nasync function generateCodeChallenge(verifier) {\r\n  const encoder = new TextEncoder();\r\n  const data = encoder.encode(verifier);\r\n  const digest = await window.crypto.subtle.digest('SHA-256', data);\r\n  return btoa(String.fromCharCode(...new Uint8Array(digest)))\r\n    .replace(/\\+/g, '-')\r\n    .replace(/\\//g, '_')\r\n    .replace(/=+$/, '');\r\n}\r\n\r\nfunction NowPlaying() {\r\n  const [token, setToken] = useState(null);\r\n  const [refreshToken, setRefreshToken] = useState(null);\r\n  const [track, setTrack] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const params = new URLSearchParams(window.location.search);\r\n    const code = params.get('code');\r\n    const savedAccess = localStorage.getItem('access_token');\r\n    const savedRefresh = localStorage.getItem('refresh_token');\r\n\r\n    if (code) {\r\n      const verifier = localStorage.getItem('pkce_verifier');\r\n      fetch(TOKEN_ENDPOINT, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n        body: new URLSearchParams({\r\n          grant_type: 'authorization_code',\r\n          code,\r\n          redirect_uri: REDIRECT_URI,\r\n          client_id: CLIENT_ID,\r\n          code_verifier: verifier\r\n        })\r\n      })\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          localStorage.setItem('access_token', data.access_token);\r\n          localStorage.setItem('refresh_token', data.refresh_token);\r\n          setToken(data.access_token);\r\n          setRefreshToken(data.refresh_token);\r\n          window.history.replaceState({}, document.title, window.location.pathname);\r\n        })\r\n        .catch(console.error);\r\n    } else if (savedAccess) {\r\n      setToken(savedAccess);\r\n      setRefreshToken(savedRefresh);\r\n    }\r\n  }, []);\r\n\r\n  const handleLogin = async () => {\r\n    const verifier = generateCodeVerifier();\r\n    const challenge = await generateCodeChallenge(verifier);\r\n    localStorage.setItem('pkce_verifier', verifier);\r\n\r\n    const authUrl = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}` +\r\n      `&response_type=code` +\r\n      `&redirect_uri=${encodeURIComponent(REDIRECT_URI)}` +\r\n      `&scope=${encodeURIComponent(SCOPES)}` +\r\n      `&code_challenge_method=S256` +\r\n      `&code_challenge=${challenge}`;\r\n\r\n    window.location = authUrl;\r\n  };\r\n\r\n  const refreshAccessToken = useCallback(() => {\r\n    if (!refreshToken) return;\r\n    fetch(TOKEN_ENDPOINT, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\r\n      body: new URLSearchParams({\r\n        grant_type: 'refresh_token',\r\n        refresh_token: refreshToken,\r\n        client_id: CLIENT_ID\r\n      })\r\n    })\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        localStorage.setItem('access_token', data.access_token);\r\n        setToken(data.access_token);\r\n      })\r\n      .catch(console.error);\r\n  }, [refreshToken]);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n\r\n    const fetchNow = async () => {\r\n      const res = await fetch('https://api.spotify.com/v1/me/player/currently-playing', {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      if (res.status === 401) return refreshAccessToken();\r\n      if (res.status === 204 || !res.ok) return setTrack(null);\r\n      const data = await res.json();\r\n      if (data.is_playing && data.item) {\r\n        setTrack({\r\n          title: data.item.name,\r\n          artists: data.item.artists.map(a => a.name).join(', '),\r\n          albumArt: data.item.album.images[0].url,\r\n          url: data.item.external_urls.spotify\r\n        });\r\n      } else {\r\n        setTrack(null);\r\n      }\r\n    };\r\n\r\n    fetchNow();\r\n    const id = setInterval(fetchNow, 15000);\r\n    return () => clearInterval(id);\r\n  }, [token, refreshAccessToken]);\r\n\r\n  if (!token) {\r\n    return (\r\n      <button\r\n        onClick={handleLogin}\r\n        className=\"px-6 py-2 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg shadow transition duration-300\"\r\n      >\r\n        Log in with Spotify\r\n      </button>\r\n    );\r\n  }\r\n\r\n  if (!track) {\r\n    return <p className=\"italic text-gray-500\">Nothing playing right now.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex items-center bg-gray-900 text-white p-4 rounded-xl shadow-lg max-w-md\">\r\n      <img\r\n        src={track.albumArt}\r\n        alt=\"Album Art\"\r\n        className=\"w-16 h-16 rounded-lg mr-4 shadow-md\"\r\n      />\r\n      <div className=\"flex flex-col\">\r\n        <a\r\n          href={track.url}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer\"\r\n          className=\"text-green-400 font-semibold text-lg hover:underline\"\r\n        >\r\n          <span role=\"img\" aria-label=\"headphones\">🎧</span> {track.title}\r\n        </a>\r\n        <span className=\"text-sm text-gray-300\">{track.artists}</span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default NowPlaying;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst API_KEY = '74f4c65fa40120881e93ed2e2e832c7d'; // <- paste your key here\r\nconst CITY = 'Leicester'; // or detect via geolocation\r\n\r\nfunction Weather() {\r\n  const [weather, setWeather] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(`https://api.openweathermap.org/data/2.5/weather?q=${CITY}&units=metric&appid=${API_KEY}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setWeather({\r\n          temp: data.main.temp,\r\n          condition: data.weather[0].main,\r\n          icon: data.weather[0].icon\r\n        });\r\n      })\r\n      .catch(console.error);\r\n  }, []);\r\n\r\n  if (!weather) return <p className=\"text-gray-500 italic\">Loading weather...</p>;\r\n\r\n  return (\r\n    <div className=\"flex items-center bg-blue-100 text-blue-900 p-4 rounded-xl shadow max-w-sm mt-4\">\r\n      <img\r\n        src={`https://openweathermap.org/img/wn/${weather.icon}@2x.png`}\r\n        alt={weather.condition}\r\n        className=\"w-12 h-12 mr-4\"\r\n      />\r\n      <div>\r\n        <p className=\"font-semibold\">{CITY}</p>\r\n        <p>{weather.temp}°C – {weather.condition}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Weather;\r\n","// src/CalendarEmbed.js\r\nimport React from 'react';\r\n\r\nfunction CalendarEmbed() {\r\n  return (\r\n    <div className=\"mt-6\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">📅 My Calendar</h2>\r\n      <div className=\"rounded overflow-hidden shadow-lg\">\r\n        <iframe\r\n          src=\"https://outlook.office365.com/owa/calendar/31941d49ba5446068f8d6e9f44174234@student.le.ac.uk/ed5d16aaf1534ef08673eed39f85ea515267399925583823516/calendar.html\"\r\n          style={{ border: 0 }}\r\n          width=\"100%\"\r\n          height=\"600\"\r\n          frameBorder=\"0\"\r\n          scrolling=\"no\"\r\n          title=\"Outlook Calendar\"\r\n          className=\"w-full rounded\"\r\n        ></iframe>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CalendarEmbed;\r\n","import React from 'react';\nimport NowPlaying from './NowPlaying';\nimport Weather from './Weather'; // <- import the new component\nimport './App.css';\nimport CalendarEmbed from './CalendarEmbed';\n\nfunction App() {\n  return (\n    <div className=\"App p-6 font-sans\">\n      {/* Site Header */}\n      <header className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold\">Welcome to J4mesT's Site</h1>\n      </header>\n\n      {/* Now Playing Section */}\n      <section className=\"mb-8\">\n        <h2 className=\"text-xl font-semibold mb-2\">Now Listening</h2>\n        <NowPlaying />\n      </section>\n\n      {/* Weather Section */}\n      <section>\n        <h2 className=\"text-xl font-semibold mb-2\">Weather</h2>\n        <Weather />\n      </section>\n      <section>\n        <CalendarEmbed />\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n","// src/index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport App from './App';\nimport './index.css'; // optional\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n"],"sourceRoot":""}