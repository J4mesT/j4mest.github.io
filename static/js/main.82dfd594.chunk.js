(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r);const s="fa95a427198e4d4790c0be1b9a5d994c",l="https://j4mest.github.io/",i="user-read-currently-playing user-read-playback-state",m="https://accounts.spotify.com/authorize",d="https://accounts.spotify.com/api/token";var u=function(){const[e,t]=Object(n.useState)(null),[a,r]=Object(n.useState)(null),[c,u]=Object(n.useState)(null);Object(n.useEffect)(()=>{const e=new URLSearchParams(window.location.search).get("code"),a=localStorage.getItem("access_token"),n=localStorage.getItem("refresh_token");if(e){const a=localStorage.getItem("pkce_verifier");fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"authorization_code",code:e,redirect_uri:l,client_id:s,code_verifier:a})}).then(e=>e.json()).then(e=>{localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),t(e.access_token),r(e.refresh_token),window.history.replaceState({},document.title,window.location.pathname)}).catch(console.error)}else a&&(t(a),r(n))},[]);const p=async()=>{const e=function(){const e=new Uint8Array(64);return window.crypto.getRandomValues(e),btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(),t=await async function(e){const t=(new TextEncoder).encode(e),a=await window.crypto.subtle.digest("SHA-256",t);return btoa(String.fromCharCode(...new Uint8Array(a))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(e);localStorage.setItem("pkce_verifier",e);const a=`${m}?client_id=${s}`+"&response_type=code"+`&redirect_uri=${encodeURIComponent(l)}`+`&scope=${encodeURIComponent(i)}`+"&code_challenge_method=S256"+`&code_challenge=${t}`;window.location=a},h=Object(n.useCallback)(()=>{a&&fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:a,client_id:s})}).then(e=>e.json()).then(e=>{localStorage.setItem("access_token",e.access_token),t(e.access_token)}).catch(console.error)},[a]);return Object(n.useEffect)(()=>{if(!e)return;const t=async()=>{const t=await fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:`Bearer ${e}`}});if(401===t.status)return h();if(204===t.status||!t.ok)return u(null);const a=await t.json();a.is_playing&&a.item?u({title:a.item.name,artists:a.item.artists.map(e=>e.name).join(", "),albumArt:a.item.album.images[0].url,url:a.item.external_urls.spotify}):u(null)};t();const a=setInterval(t,15e3);return()=>clearInterval(a)},[e,h]),e?c?o.a.createElement("div",{className:"flex items-center bg-gray-900 text-white p-4 rounded-xl shadow-lg max-w-md"},o.a.createElement("img",{src:c.albumArt,alt:"Album Art",className:"w-16 h-16 rounded-lg mr-4 shadow-md"}),o.a.createElement("div",{className:"flex flex-col"},o.a.createElement("a",{href:c.url,target:"_blank",rel:"noopener noreferrer",className:"text-green-400 font-semibold text-lg hover:underline"},o.a.createElement("span",{role:"img","aria-label":"headphones"},"\ud83c\udfa7")," ",c.title),o.a.createElement("span",{className:"text-sm text-gray-300"},c.artists))):o.a.createElement("p",{className:"italic text-gray-500"},"Nothing playing right now."):o.a.createElement("button",{onClick:p,className:"px-6 py-2 bg-green-500 hover:bg-green-600 text-white font-semibold rounded-lg shadow transition duration-300"},"Log in with Spotify")};const p="74f4c65fa40120881e93ed2e2e832c7d",h="London";var g=function(){const[e,t]=Object(n.useState)(null);return Object(n.useEffect)(()=>{fetch(`https://api.openweathermap.org/data/2.5/weather?q=${h}&units=metric&appid=${p}`).then(e=>e.json()).then(e=>{t({temp:e.main.temp,condition:e.weather[0].main,icon:e.weather[0].icon})}).catch(console.error)},[]),e?o.a.createElement("div",{className:"flex items-center bg-blue-100 text-blue-900 p-4 rounded-xl shadow max-w-sm mt-4"},o.a.createElement("img",{src:`https://openweathermap.org/img/wn/${e.icon}@2x.png`,alt:e.condition,className:"w-12 h-12 mr-4"}),o.a.createElement("div",null,o.a.createElement("p",{className:"font-semibold"},h),o.a.createElement("p",null,e.temp,"\xb0C \u2013 ",e.condition))):o.a.createElement("p",{className:"text-gray-500 italic"},"Loading weather...")};a(13);var f=function(){return o.a.createElement("div",{className:"App p-6 font-sans"},o.a.createElement("header",{className:"mb-8"},o.a.createElement("h1",{className:"text-3xl font-bold"},"Welcome to J4mesT's Site")),o.a.createElement("section",{className:"mb-8"},o.a.createElement("h2",{className:"text-xl font-semibold mb-2"},"Now Listening"),o.a.createElement(u,null)),o.a.createElement("section",null,o.a.createElement("h2",{className:"text-xl font-semibold mb-2"},"Weather"),o.a.createElement(g,null)))};a(14);c.a.createRoot(document.getElementById("root")).render(o.a.createElement(f,null))},4:function(e,t,a){e.exports=a(15)}},[[4,1,2]]]);
//# sourceMappingURL=main.82dfd594.chunk.js.map